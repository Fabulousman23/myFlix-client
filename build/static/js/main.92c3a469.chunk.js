(this["webpackJsonpmyflix-client"]=this["webpackJsonpmyflix-client"]||[]).push([[0],{120:function(e,t,s){},121:function(e,t,s){"use strict";s.r(t);var r=s(0),a=s.n(r),o=s(15),n=s.n(o),i=s(39),c=s(55);const l="SET_MOVIES",h="SET_FILTER";const j=Object(i.combineReducers)({visibilityFilter:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===h?t.value:e},movies:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===l?t.value:e}});var d=j,b=s(81),m=s(30),p=s.n(m),x=s(25),O=s(44),g=s(43),u=s(47),v=s(28),w=s(1);var y=function(){return localStorage.getItem("token")?Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(u.a,{bg:"light",children:Object(w.jsxs)(g.a,{children:[Object(w.jsx)(u.a.Brand,{href:"LoginView",children:"My Movie App"}),Object(w.jsx)(v.a.Item,{children:Object(w.jsx)(v.a.Link,{href:"#",onClick:()=>{localStorage.clear(),window.location.replace("/")},children:"Log Out"})})]})})}):Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(u.a,{bg:"light",children:Object(w.jsxs)(g.a,{children:[Object(w.jsx)(u.a.Brand,{href:"LoginView",children:"My Movie App"}),Object(w.jsx)(v.a.Item,{children:Object(w.jsx)(v.a.Link,{href:"/",children:"Log In"})}),Object(w.jsx)(v.a.Item,{children:Object(w.jsx)(v.a.Link,{href:"register",children:"Sign Up"})})]})})})};function C(e){const[t,s]=Object(r.useState)(""),[a,o]=Object(r.useState)(""),[n,i]=Object(r.useState)(""),[c,l]=Object(r.useState)("");return Object(w.jsxs)(x.a,{children:[Object(w.jsxs)(x.a.Group,{children:[Object(w.jsx)(x.a.Label,{children:"Username:"}),Object(w.jsx)(x.a.Control,{placeholder:"Enter Username",type:"text",value:t,onChange:e=>s(e.target.value),required:!0})]}),Object(w.jsx)(x.a.Label,{children:"Password:"}),Object(w.jsx)(x.a.Control,{placeholder:"Enter Password",type:"password",value:a,onChange:e=>o(e.target.value)}),Object(w.jsx)(x.a.Label,{children:"Email:"}),Object(w.jsx)(x.a.Control,{placeholder:"Your @email.please",type:"email",value:n,onChange:e=>i(e.target.value)}),Object(w.jsx)(x.a.Label,{children:"Birthday:"}),Object(w.jsx)(x.a.Control,{type:"date",value:c,onChange:e=>l(e.target.value),required:!0}),Object(w.jsx)(O.a,{type:"submit",onClick:s=>{s.preventDefault(),console.log(t,a,n,c),e.onRegisterIn({username:t,password:a,email:n,birthday:c})},children:"Submit"}),Object(w.jsx)(O.a,{type:"button",onClick:()=>window.location.replace("/"),children:"Log in"})]})}function S(e){const[t,s]=Object(r.useState)(""),[a,o]=Object(r.useState)("");return Object(w.jsxs)(x.a,{children:[Object(w.jsxs)(x.a.Group,{controlId:"formUsername",children:[Object(w.jsx)(x.a.Label,{children:"Username:"}),Object(w.jsx)(x.a.Control,{type:"text",placeholder:"Enter Username",onChange:e=>s(e.target.value)})]}),Object(w.jsxs)(x.a.Group,{controlId:"formPassword",children:[Object(w.jsx)(x.a.Label,{children:"Password:"}),Object(w.jsx)(x.a.Control,{type:"password",placeholder:"Password",onChange:e=>o(e.target.value)})]}),Object(w.jsx)(O.a,{variant:"primary",type:"submit",onClick:s=>{s.preventDefault(),p.a.post("https://my-movie-app1234.herokuapp.com/login",{Username:t,Password:a}).then((t=>{const s=t.data;localStorage.setItem("token",s.token),localStorage.setItem("user",s.user.Username),window.location.reload(),e.onLoggedIn(s)})).catch((e=>{console.log("no such user")}))},children:"Submit"}),Object(w.jsx)(O.a,{type:"button",onClick:()=>window.location.replace("/register"),children:"Register"})]})}var k=s(36),I=s(38);class f extends a.a.Component{render(){const{movie:e}=this.props;return Object(w.jsxs)(k.a,{children:[Object(w.jsx)(k.a.Img,{variant:"top",src:e.Imagepath}),Object(w.jsxs)(k.a.Body,{children:[Object(w.jsx)(k.a.Title,{children:e.Title}),Object(w.jsx)(k.a.Text,{children:e.Description}),Object(w.jsx)(I.b,{to:`/movies/${e._id}`,children:Object(w.jsx)(O.a,{variant:"link",children:"Open"})})]})]})}}var B=s(124);class D extends a.a.Component{constructor(){super(...arguments),this.state={show:!1,showDirector:!1,movie:this.props.movies.find((e=>e._id===this.props.movieId))},this.handleClose=()=>this.setState({show:!1}),this.handleShow=()=>this.setState({show:!0}),this.handleCloseDirector=()=>this.setState({showDirector:!1}),this.handleShowDirector=()=>this.setState({showDirector:!0})}render(){console.log(this.props);const{movies:e,goBack:t}=this.props,{movie:s}=this.state;return Object(w.jsxs)("div",{className:"movie-view",children:[Object(w.jsx)("div",{className:"movie-poster",children:Object(w.jsx)("img",{src:s.Imagepath,width:"500",height:"600"})}),Object(w.jsxs)("div",{className:"movie-title",children:[Object(w.jsx)("span",{className:"label",children:"Title: "}),Object(w.jsx)("span",{className:"value",children:s.Title})]}),Object(w.jsxs)("div",{className:"movie-description",children:[Object(w.jsx)("span",{className:"label",children:"Description: "}),Object(w.jsx)("span",{className:"value",children:s.Description})]}),Object(w.jsxs)("div",{style:{display:"flex",flexDirection:"row",padding:"10px"},children:[Object(w.jsx)("button",{onClick:()=>{t()},children:"Back"})," ",Object(w.jsx)("br",{}),Object(w.jsx)(O.a,{type:"button",variant:"primary",onClick:this.handleShowDirector,children:s.Director.Name})," ",Object(w.jsx)("br",{}),Object(w.jsx)(O.a,{type:"button",variant:"primary",onClick:this.handleShow,children:s.Genre.Name})]}),Object(w.jsxs)(B.a,{show:this.state.show,onHide:this.handleClose,children:[Object(w.jsx)(B.a.Header,{closeButton:!0,children:Object(w.jsx)(B.a.Title,{children:s.Genre.Name})}),Object(w.jsx)(B.a.Body,{children:s.Genre.Description}),Object(w.jsxs)(B.a.Footer,{children:[Object(w.jsx)(O.a,{variant:"secondary",onClick:this.handleClose,children:"Close"}),Object(w.jsx)(O.a,{variant:"primary",onClick:this.handleClose,children:"Save Changes"})]})]}),Object(w.jsxs)(B.a,{show:this.state.showDirector,onHide:this.handleCloseDirector,children:[Object(w.jsx)(B.a.Header,{closeButton:!0,children:Object(w.jsx)(B.a.Title,{children:s.Director.Name})}),Object(w.jsxs)(B.a.Body,{children:[s.Director.Bio," ",Object(w.jsx)("br",{})," Born on: ",s.Director.Birth]}),Object(w.jsxs)(B.a.Footer,{children:[Object(w.jsx)(O.a,{variant:"secondary",onClick:this.handleCloseDirector,children:"Close"}),Object(w.jsx)(O.a,{variant:"primary",onClick:this.handleCloseDirector,children:"Save Changes"})]})]})]})}}var L=s(123),N=s(7);class M extends a.a.Component{constructor(){super(),this.state={user:null},this.onRegisterIn=this.onRegisterIn.bind(this)}componentDidMount(){let e=localStorage.getItem("token");null!==e&&(this.setState({user:localStorage.getItem("username")}),this.getMovies(e))}getMovies(e){p.a.get("https://my-movie-app1234.herokuapp.com/movies",{headers:{Authorization:`Bearer ${e}`}}).then((e=>{console.log(e.data),this.props.setMovies(e.data)})).catch((e=>{console.log(e)}))}setSelectedMovie(e){this.setState({selectedMovie:e})}onLoggedOut(){localStorage.removeItem("token"),localStorage.removeItem("user"),this.setState({user:null})}onRegisterIn(e){let{username:t,password:s,email:r,birthday:a}=e;p.a.post("https://my-movie-app1234.herokuapp.com/users",{Username:t,Password:s,Birthday:a,Email:r}).then((e=>{e.data;alert("REG SUCSESFULL"),window.location.replace("/")})).catch((e=>{console.log(e)})),this.setState({registered:!0})}render(){let{movies:e}=this.props,{user:t}=this.state;localStorage.getItem("user");return console.log(e),Object(w.jsxs)("div",{children:[Object(w.jsx)(y,{user:t}),Object(w.jsx)(I.a,{children:Object(w.jsxs)(g.a,{fluid:!0,children:[Object(w.jsx)(N.a,{exact:!0,path:"/",render:()=>localStorage.getItem("token")?Object(w.jsx)(L.a,{className:"main-view-width mx-auto justify-content-center mt-3",children:e.map((e=>Object(w.jsx)(f,{movie:e,children:e.title},e._id)))}):Object(w.jsx)(S,{onLoggedIn:this.onLoggedIn})}),Object(w.jsx)(N.a,{path:"/register",render:()=>Object(w.jsx)(C,{onRegisterIn:this.onRegisterIn})}),Object(w.jsx)(N.a,{path:"/movies/:movieId",render:e=>{let{match:t,history:s}=e;return Object(w.jsx)(D,{movies:this.props.movies,movieId:t.params.movieId,goBack:s.goBack})}}),Object(w.jsx)(N.a,{path:"/directors/:directorName",render:t=>{let{match:s,history:r}=t;return Object(w.jsx)(DirectorView,{director:e.find((e=>e.director.name===s.params.directorName)).director,directorMovies:e.filter((e=>e.director.name===s.params.directorName)),goBack:r.goBack})}}),Object(w.jsx)(N.a,{path:"/genres/:genreName",render:t=>{let{match:s,history:r}=t;return Object(w.jsx)(GenreView,{genreMovies:e.filter((e=>e.genre.name===s.params.genreName)),genre:e.find((e=>e.genre.name===s.params.genreName)).genre,goBack:r.goBack})}}),Object(w.jsx)(N.a,{path:`/users/${t}`,render:s=>{let{history:r}=s;return t?Object(w.jsx)(ProfileView,{movies:e,goBack:r.goBack,favoriteMovies:favoriteMovies||[],handleFavorite:this.handleFavorite}):Object(w.jsx)(Redirect,{to:"/"})}})]})})]})}}var E=Object(c.b)((e=>({movies:e.movies})),{setMovies:function(e){return{type:l,value:e}}})(M);s(120);const R=Object(i.legacy_createStore)(d,Object(b.devToolsEnhancer)());class T extends a.a.Component{render(){return Object(w.jsx)(c.a,{store:R,children:Object(w.jsx)(g.a,{children:Object(w.jsx)(E,{})})})}}const U=document.getElementsByClassName("app-container")[0];n.a.render(a.a.createElement(T),U)}},[[121,1,2]]]);
//# sourceMappingURL=main.92c3a469.chunk.js.map